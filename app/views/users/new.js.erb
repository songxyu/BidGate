// $(".left_wrapper").hide(); // TODO:  not work 

$(".content_area").html("<%= escape_javascript render(:partial => 'users/new') %>");

fnMaskDiv("#reg-user-info-area");
//$("#reg-user-info-area *").attr('disabled',true);

var fnBindVerifyButtonClick = function(){
	// company verify 
	$('#btn_verify_company').bind('click', function() {
		
		var acc_num = $("#company_account_num").val();
		var lgl_person =  $("#company_legal_person").val();		
		if (acc_num && acc_num!= "" &&  lgl_person!=""){				
			$.ajax({
				url : '/company/verify', 
				type : 'GET',
				data : {
					'account_num' : acc_num,
					'legal_person' : lgl_person
				}
			}).done(function(data) {
				//alert(JSON.stringify(data)); 
			}).fail(function(jqXHR, textStatus) {
				//alert("Request failed: " + textStatus);
			});
		}else{
			var comp_name = $("#company_name").val();
			var comp_license = $("#company_license_image").val();
			var comp_lp = $("#company_legal_person").val();
			var comp_addr = $("#company_register_address").val();
			if(comp_name!="" && comp_license != ""){
				$.ajax({
					url : '/company/verify', 
					type : 'GET',
					data : {
						'name' : comp_name,
						'license_image' : comp_license,
						'legal_person': comp_lp,
						'register_address': comp_addr
					}
				}).done(function(data) {
					
					//alert(JSON.stringify(data)); 
				}).fail(function(jqXHR, textStatus) {
					//alert("Request failed: " + textStatus);
				});
			}else{
				// TODO: error msg display
				$("#vefiry_msg_area").html("Fill required info!");
			}
			
		}	
	});
};


$('input[type=radio][name=registerMethod]').change(function() {
	
	if (this.value == 'unreg') {
		$("#company-info-area").html("<%= j render(:partial => 'companies/basic_info', \
		 :locals => {:company => @user.company }) %>");
		 
		 fnBindVerifyButtonClick();
		 fnMaskDiv("#reg-user-info-area");
	}
	else if (this.value == 'reged') {
		$("#company-info-area").html("<%= j render(:partial => 'companies/reged_info', \
		:locals => {:company => @user.company }) %>");
		
		fnBindVerifyButtonClick();
		fnMaskDiv("#reg-user-info-area");
	}
	
});



